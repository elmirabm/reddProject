(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,a){},24:function(e,t,a){e.exports=a(38)},38:function(e,t,a){"use strict";a.r(t);var l=a(0),r=a.n(l),n=a(13),i=a(4),o=a(5),c=a(7),s=a(6),d=a(8),u=(a(29),a(11),a(12),function(e){return r.a.createElement("div",{id:"logo",className:"row","data-test":"logoTest"},r.a.createElement("div",{className:"col-4"}),r.a.createElement("div",{className:"col-4"},r.a.createElement("img",{className:"img-thumbnail",src:"https://upload.wikimedia.org/wikipedia/en/thumb/5/58/Reddit_logo_new.svg/250px-Reddit_logo_new.svg.png"})))}),p=a(1),h={LOAD_CATEGORIES:"LOAD_CATEGORIES",ADD_DATA:"ADD_DATA",SET_DATA:"SET_DATA",SET_AVAILABLE_MORE:"SET_AVAILABLE_MORE"},m={isLoaded:!1,items:[],category:"/r/All/",limit:25,intervalTime:6e4,before:null,after:null,availableMore:!1,addNew:!1,page:0,categories:[],scrollBy:0,reload:!1,page0Top:""};function g(e,t,a,l,r){var n="https://api.reddit.com"+e+"new?limit="+l;return null!=t&&(n=n+"&count="+l+"&before="+t),null!=a&&(n=n+"&count="+l+"&after="+a),function(t){fetch(n).then(function(e){return e.json()}).then(function(a){t({type:h.SET_DATA,payload:a.data,page:r,category:e})})}}var f=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{class:"d-flex justify-content-around"},r.a.createElement("nav",{"aria-label":"Page navigation"},r.a.createElement("ul",{class:"pagination"},r.a.createElement("li",{class:this.props.availableMore?"page-item":"page-item invisible"},r.a.createElement("a",{class:"page-link",onClick:function(){return e.callFirstPage()},"aria-label":"Previous"},r.a.createElement("span",{"aria-hidden":"true"},"\xab"),"Most Recent")),r.a.createElement("li",{class:null!=this.props.before?"page-item":"page-item disabled"},r.a.createElement("a",{class:"page-link",onClick:function(){return e.callPreviousPage()},"aria-label":"Previous"},r.a.createElement("span",{"aria-hidden":"true"},"\xab"),"Previous")),r.a.createElement("li",{class:"page-item"},r.a.createElement("a",{class:"page-link",onClick:function(){return e.callNextPage()},"aria-label":"Next"},r.a.createElement("span",{"aria-hidden":"true"},"\xbb"),"Next")))))}},{key:"callPreviousPage",value:function(){this.props.loadData(this.props.category,this.props.before,null,this.props.limit,-1),window.scrollTo(0,0)}},{key:"callNextPage",value:function(){this.props.loadData(this.props.category,null,this.props.after,this.props.limit,1),window.scrollTo(0,0)}},{key:"callFirstPage",value:function(){this.props.loadData(this.props.category,null,null,this.props.limit,0),window.scrollTo(0,0)}}]),t}(r.a.Component),v=Object(p.b)(function(e){return{availableMore:e.reducer.availableMore,limit:e.reducer.limit,before:e.reducer.before,after:e.reducer.after,category:e.reducer.category}},function(e){return{loadData:function(t,a,l,r,n){e(g(t,a,l,r,n))}}})(f),b=a(22),E=a.n(b),y=function(e){return r.a.createElement("div",{id:"subreddit",class:"container border sub vertical-align: bottom"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-2"},r.a.createElement("img",{src:e.data.thumbnail,alt:"new",style:{width:"100px",height:"100px"}})),r.a.createElement("div",{className:"col-10"},r.a.createElement("div",{class:"container"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-12"},r.a.createElement("a",{href:e.data.url,class:"badge badge-light"},e.data.url.length>30?e.data.url.slice(0,29)+"...":e.data.url))),r.a.createElement("div",{class:"row titlerow"},r.a.createElement("div",{class:"col-12 align-self-center"},r.a.createElement("h6",null,r.a.createElement("a",{href:"https://www.reddit.com/"+e.data.permalink,class:" badge-light"},e.data.title.length>200?e.data.title.slice(0,199)+"...":e.data.title)))),r.a.createElement("div",{class:"row"},r.a.createElement("div",{class:"col-6 "},r.a.createElement("a",{href:"https://www.reddit.com//user/"+e.data.author,class:"badge-light"},r.a.createElement("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTGHrHb3o7rXscb1kSKDGeSKYjLf3DUnCr8C_ycH_xCE4ijdAdz8w",alt:"new",style:{width:"15px",height:"15 px"}}),e.data.author)),r.a.createElement("div",{class:"col-2 "},r.a.createElement("a",{href:"https://www.reddit.com//r/"+e.category+"/comments/"+e.data.id,class:"badge badge-light"},r.a.createElement("img",{src:"https://png.pngtree.com/svg/20170608/ba314d7b9e.svg",alt:"new",style:{width:"15px",height:"15 px"}}),"Comments")),r.a.createElement("div",{class:"col-4 "},r.a.createElement("img",{src:"https://cdn2.iconfinder.com/data/icons/pittogrammi/142/10-512.png",alt:"new",style:{width:"15px",height:"15 px"}}),r.a.createElement(E.a,{unix:!0,tz:"Canada/Eastern",format:"MMMM Do YYYY, h:mm:ss a",class:"badge badge-light"},e.data.created_utc)))))))},w=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.loadCategories()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{class:"selector"},r.a.createElement("div",{class:"row"},r.a.createElement("div",{className:"col-md-2 col-sm-2"},"Category:"),r.a.createElement("div",{className:"col-md-10 col-sm-10"},r.a.createElement("select",{class:"form-control",defaultValue:this.props.category,onChange:function(t){return e.props.loadData(t.target.value,null,null,e.props.limit,0)}},r.a.createElement("option",{value:"/r/All/"},"All"),this.props.categories.map(function(e){return r.a.createElement("option",{value:e.data.url},e.data.title)})))))}}]),t}(r.a.Component),A=Object(p.b)(function(e){return{categories:e.reducer.categories,category:e.reducer.category,limit:e.reducer.limit}},function(e){return{loadData:function(t,a,l,r,n){e(g(t,a,l,r,n))},loadCategories:function(){e(function(e){fetch("https://api.reddit.com/subreddits/popular?limit=100").then(function(e){return e.json()}).then(function(t){e({type:h.LOAD_CATEGORIES,payload:t.data.children})})})}}})(w),O=function(e){function t(){var e,a;Object(i.a)(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(r)))).handleScroll=function(){a.calculateBeforeAfter()},a}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){window.addEventListener("scroll",this.handleScroll,!0),this.callFirstPage(),this.intervalControl(!0),this.startIntervalMoreAvailble()}},{key:"render",value:function(){var e=this;return this.props.isLoaded?(this.props.reload&&this.callFirstPage(),this.props.addNew&&this.callMore(null),this.setScroll(),this.calculateBeforeAfter(),this.intervalControl(0==this.props.page),r.a.createElement("div",{className:"container"},r.a.createElement(u,null),r.a.createElement(A,null),r.a.createElement(v,null),this.props.items.map(function(t){return r.a.createElement(y,{data:t.data,category:e.props.category})}),r.a.createElement(v,null))):r.a.createElement("div",null,r.a.createElement(u,null)," loading ....")}},{key:"startInterval",value:function(){var e=this;this.interval=setInterval(function(){e.callMore(e.before)},this.props.intervalTime)}},{key:"startIntervalMoreAvailble",value:function(){var e=this;setInterval(function(){e.props.loadAvailbleMore(e.props.category)},5e3)}},{key:"intervalControl",value:function(e){e?null!=this.interval&&void 0!=this.interval||this.startInterval():(clearInterval(this.interval),this.interval=null)}},{key:"setScroll",value:function(){this.props.doScroll&&0!=this.props.scrollBy&&window.scrollTo(0,window.scrollY+140*this.props.scrollBy)}},{key:"calculateBeforeAfter",value:function(){Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight),window.innerHeight;var e=(window.scrollY-140)/140;this.top=Math.floor(e);var t=Math.ceil(e+6);this.top<0&&(this.top=0),t>23?(t=24,this.intervalControl(!1)):this.intervalControl(0==this.props.page),this.props.items.length<25||(this.before=this.props.items[this.top+1].data.name)}},{key:"callFirstPage",value:function(){this.props.loadData(this.props.category,null,null,this.props.limit,0),window.scrollTo(0,0)}},{key:"callMore",value:function(e){this.props.loadDataAdd(this.props.category,e,this.props.limit,this.top)}}]),t}(r.a.Component),j=Object(p.b)(function(e){return{isLoaded:e.reducer.isLoaded,items:e.reducer.items,category:e.reducer.category,intervalTime:e.reducer.intervalTime,limit:e.reducer.limit,before:e.reducer.before,after:e.reducer.after,addNew:e.reducer.addNew,doScroll:e.reducer.doScroll,page:e.reducer.page,scrollBy:e.reducer.scrollBy,reload:e.reducer.reload}},function(e){return{loadData:function(t,a,l,r,n){e(g(t,a,l,r,n))},loadDataAdd:function(t,a,l,r){e(function(e,t,a,l){var r="https://api.reddit.com"+e+"new?limit="+(a+1);return null!=t&&(r=r+"&count="+(a+1)+"&before="+t),function(e){fetch(r).then(function(e){return e.json()}).then(function(t){e({type:h.ADD_DATA,payload:t.data,top:l,page:0})})}}(t,a,l,r))},loadAvailbleMore:function(t){e(function(e){var t="https://api.reddit.com"+e+"new?limit=1";return function(e){fetch(t).then(function(e){return e.json()}).then(function(t){e({type:h.SET_AVAILABLE_MORE,name:t.data.children[0].data.name})})}}(t))}}})(O);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(37);var T=a(9),D=a(14),k=a(3),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h.SET_AVAILABLE_MORE:var a=!1;""!=e.page0Top&&t.name!=e.page0Top&&(a=!0),e=Object(k.a)({},e,{availableMore:a});break;case h.LOAD_CATEGORIES:e=Object(k.a)({},e,{categories:t.payload,availableMore:!1});break;case h.ADD_DATA:var l=t.payload.children.filter(function(t){return 0===e.items.filter(function(e){return e.data.id===t.data.id}).length}),r=l.length,n=0;if(t.payload.children.length>0){if(l.length>17){var i=l.slice(l.length-(18-t.top),l.length),o=e.items.splice(0,25-i.length);n=i.length}else{var c=25-(t.top+7)>l.length?l.length:25-(t.top+7);i=l.slice(l.length-c,l.length),o=e.items.splice(0,25-c),n=i.length}var s=Object(D.a)(new Set([].concat(Object(D.a)(i),Object(D.a)(o))));e=Object(k.a)({},e,{items:s,after:t.payload.after,before:s[0].data.name,isLoaded:!0,addNew:!1,doScroll:!0,availableMore:r>i.length,page:t.page,scrollBy:n,reload:!1,page0Top:s[0].data.name})}else e=Object(k.a)({},e,{addNew:!0,scrollBy:0,reload:!1});break;case h.SET_DATA:e=t.payload.children.length<25?Object(k.a)({},e,{addNew:!1,page:0,reload:0==t.payload.children.length}):Object(k.a)({},e,{items:t.payload.children,after:t.payload.after,before:t.payload.children[0].data.name,page0Top:t.payload.children[0].data.name,isLoaded:!0,time:e.time+1,category:t.category,addNew:!1,doScroll:!1,page:t.page,reload:!1})}return e},_=a(23),C=Object(T.d)(Object(T.c)({reducer:M}),{},Object(T.a)(_.a));Object(n.render)(r.a.createElement(p.a,{store:C},r.a.createElement(j,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.799dbbfc.chunk.js.map